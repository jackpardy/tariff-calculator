{{/* Use data passed from handleEvaluateSkillFragment: .Skill, .LandingPosStr, .LandingIsValid, .SkillDataJSON */}}
<div id="evaluation-preview-content"
     data-skill-data="{{ .SkillDataJSON | safeHTMLAttr }}"> {{/* Store data for Alpine */}}

    <h4 class="title is-6 mb-4">Skill Evaluation - {{ .Skill.Name | default "Evaluated Skill" }}</h4>

    {{/* Use Bulma columns for the three info blocks */}}
    <div class="columns">
        {{/* Block 1: Rotation & Twists */}}
        <div class="column is-one-third">
            <div class="content is-small">
                {{/* CORRECTED ternary call syntax */}}
                <p class="mb-1"><strong>Rotation:</strong> {{ .Skill.Rotation | abs }} {{ ternary .Skill.Backward "B" "F" }}</p>
                {{/* RESTORED Twists display logic */}}
                <p><strong>Twists:</strong> {{ if .Skill.TwistDistribution }}{{ .Skill.TwistDistribution | join " / " }}{{ else }}0{{ end }}</p>
            </div>
        </div>

        {{/* Block 2: Takeoff & Landing */}}
        <div class="column is-one-third">
            <div class="content is-small">
                <p class="mb-1"><strong>Takeoff:</strong> {{ .Skill.TakeoffPosition.String }}</p>
                <p><strong>Landing:</strong> <span {{if not .LandingIsValid}}class="has-text-danger"{{end}}>{{.LandingPosStr}}</span></p>
            </div>
        </div>

        {{/* Block 3: Shape & Tariff */}}
        <div class="column is-one-third">
            <div class="content is-small">
                <p class="mb-1"><strong>Shape:</strong> {{ .Skill.Shape.String }}</p>
                <p><strong>Tariff:</strong> {{printf "%.2f" .Skill.Tariff}}</p>
            </div>
        </div>
    </div>

    {{/* Buttons */}}
    <div class="buttons mt-4">
        <button class="button is-info"
                @click.prevent="addEvaluatedSkillToRoutine()"
                :disabled="routine.length >= 10">
            Add to Routine
        </button>
        <button class="button"
                @click="document.getElementById('evaluation-preview').innerHTML = ''">
            Close
        </button>
    </div>
</div>